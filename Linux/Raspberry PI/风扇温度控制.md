### 安装 GPIO 库

```shell 
sudo apt-get install python3-rpi.gpio
```

### 控制代码

```python 
#!/usr/bin/python
#coding:utf8
#自动风扇控制程序，使用wiringPi的gpio命令来操作GPIO
import RPi.GPIO as GPIO
import time
#控制风扇的GPIO
FAN_GPIO = 12
GPIO.setmode(GPIO.BOARD)
GPIO.setup(FAN_GPIO, GPIO.OUT)
 
while True:
     # 获取CPU温度
    tmpFile = open( '/sys/class/thermal/thermal_zone0/temp' )
    cpu_temp_raw = tmpFile.read()
    tmpFile.close()
    cpu_temp = round(float(cpu_temp_raw)/1000, 1)
    print(cpu_temp)
  
    # 如果温度大于45`C，就启动风扇
    if cpu_temp >= 45.0 :
        GPIO.output(FAN_GPIO, 0)
    # 如果温度小于40`C，就关闭风扇
    if cpu_temp < 40.0 :
        GPIO.output(FAN_GPIO, 1)
     
    time.sleep(10)

```

### 运行

可添加到[开机执行脚本](../Ubuntu/开机执行脚本.md)

```shell
nohup /usr/bin/python /opt/fan-ctl/run.py > /dev/null 2>&1 &
```

